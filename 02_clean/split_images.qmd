```{python}
import geopandas as gpd
import subprocess
from pyprojroot.here import here
```

```{python}
grid = gpd.read_file(here("data/raw/grid/grid_modified.gpkg"))
tif = "../01_data/raw/690585b76415e43597ffd7eb.tif"
```

```{python}
grid_filtered = grid.copy()
```

```{python}
for i, row in grid_filtered.iterrows():
    tile = row["tile_id"]
    xmin, ymin, xmax, ymax = row.geometry.bounds

    cmd = [
        "gdal_translate",
        "--config", "CPL_PROGRESS", "1",
        "-projwin", str(xmin), str(ymax), str(xmax), str(ymin),
        "-co", "COMPRESS=LZW",
        tif,
        f"../01_data/raw/tiles_c664/{tile}.tif"
    ]

    print(f"Processing {tile} ...")
    subprocess.run(cmd)

```